{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/OneDrive%20-%20Imam%20university/Desktop/Nuthur/frontend/app/employee/reports/page.js"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Image from \"next/image\";\r\n\r\nexport default function EmployeeReports() {\r\n  const [allReports, setAllReports] = useState([]);\r\n  const [searchName, setSearchName] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState(\"All\");\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Fetch reports from backend\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"authToken\");\r\n\r\n    fetch(\"http://localhost:5000/api/reports\", {\r\n      headers: {\r\n        \"Authorization\": `Bearer ${token}`\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setAllReports(data);\r\n        setLoading(false);\r\n      })\r\n      .catch(err => {\r\n        console.error(\"Error fetching reports:\", err);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  // Update report status\r\n  const updateStatus = (id, status) => {\r\n    const token = localStorage.getItem(\"authToken\");\r\n\r\n    fetch(`http://localhost:5000/api/reports/update/${id}`, {\r\n      method: \"PUT\",\r\n      headers: { \r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify({ status })\r\n    })\r\n      .then(res => res.json())\r\n      .then(updatedReport => {\r\n        setAllReports(prev => prev.map(r => r._id === updatedReport._id ? updatedReport : r));\r\n      })\r\n      .catch(err => console.error(\"Error updating status:\", err));\r\n  };\r\n\r\n  // Apply filters\r\n  const filteredReports = allReports.filter(r =>\r\n    r.user?.name?.toLowerCase().includes(searchName.toLowerCase()) &&\r\n    (statusFilter === \"All\" || r.status === statusFilter)\r\n  );\r\n\r\n  if (loading) return <p>Loading...</p>;\r\n\r\n  return (\r\n    <div style={{ fontFamily: \"Arial, sans-serif\", backgroundColor: \"#f4f4f9\", padding: \"20px\", minHeight: \"100vh\" }}>\r\n      <h1 style={{ textAlign: \"center\", color: \"#333\" }}>Employee - Volunteer Reports Dashboard</h1>\r\n\r\n      {/* Filters */}\r\n      <div style={{ textAlign: \"center\", marginBottom: \"20px\" }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search by volunteer name...\"\r\n          value={searchName}\r\n          onChange={(e) => setSearchName(e.target.value)}\r\n          style={{ padding: \"5px 10px\", margin: \"0 5px\", fontSize: \"14px\" }}\r\n        />\r\n        <select\r\n          value={statusFilter}\r\n          onChange={(e) => setStatusFilter(e.target.value)}\r\n          style={{ padding: \"5px 10px\", margin: \"0 5px\", fontSize: \"14px\" }}\r\n        >\r\n          <option value=\"All\">All Statuses</option>\r\n          <option value=\"resolved\">resolved</option>\r\n          <option value=\"rejected\">Rejected</option>\r\n          <option value=\"pending\">Pending</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Reports */}\r\n      <div style={{ display: \"flex\", flexWrap: \"wrap\", justifyContent: \"center\" }}>\r\n        {filteredReports.length === 0 ? (\r\n          <p>No reports found</p>\r\n        ) : (\r\n          filteredReports.map(report => (\r\n            <div\r\n              key={report._id}\r\n              style={{\r\n                border: \"1px solid #ccc\",\r\n                borderRadius: \"8px\",\r\n                padding: \"15px\",\r\n                margin: \"10px\",\r\n                width: \"300px\",\r\n                boxShadow: \"0 2px 5px rgba(0,0,0,0.1)\",\r\n                backgroundColor:\r\n                  report.status === \"resolved\" ? \"#d4edda\" :\r\n                  report.status === \"rejected\" ? \"#f8d7da\" :\r\n                  \"#fff3cd\",\r\n                transition: \"transform 0.2s\"\r\n              }}\r\n              onMouseEnter={e => e.currentTarget.style.transform = \"translateY(-5px)\"}\r\n              onMouseLeave={e => e.currentTarget.style.transform = \"translateY(0)\"}\r\n            >\r\n                 <h6 className=\"card-title text-truncate mb-0\">\r\n            Report #{report._id.slice(-6)}\r\n          </h6>\r\n          \r\n              <p style={{ margin: \"5px 0\", fontSize: \"14px\", color: \"#666\" }}><strong>Volunteer Name:</strong> {report.user?.name}</p>\r\n                 <p style={{ margin: \"5px 0\", fontSize: \"14px\", color: \"#666\" }}><strong>Email:</strong> {report.user?.email}</p>\r\n              <p style={{ margin: \"5px 0\", fontSize: \"14px\", color: \"#666\" }}><strong>Description:</strong> {report.description}</p>\r\n               <p style={{ margin: \"5px 0\", fontSize: \"14px\", color: \"#666\" }}><strong>Location: </strong>{report.location?.lat?.toFixed(4)}, {report.location?.lng?.toFixed(4)}</p>\r\n                <p style={{ margin: \"5px 0\", fontSize: \"14px\", color: \"#666\" }}><strong>Created At: </strong> {new Date(report.createdAt).toLocaleDateString()}</p>\r\n              <p style={{ margin: \"5px 0\", fontSize: \"14px\", color: \"#666\" }}>\r\n                <span style={{ fontWeight: \"bold\" }}> Status: {report.status}</span>\r\n              </p>\r\n               \r\n              {/* صورة البلاغ */}\r\n      \r\n  <img\r\n    src={`http://localhost:5000/api/reports/image/${report.image.split(\"\\\\\").pop().split(\"/\").pop()}`} \r\n    alt=\"report\"\r\n    width=\"100%\"\r\n    style={{ borderRadius: \"5px\", marginTop: \"10px\" }}\r\n  />\r\n\r\n\r\n\r\n              {/* أزرار التحكم */}\r\n              <div style={{ marginTop: \"10px\" }}>\r\n                <button\r\n                  onClick={() => updateStatus(report._id, \"resolved\")}\r\n                  style={{ margin: \"5px 5px 0 0\", padding: \"5px 10px\", borderRadius: \"4px\", cursor: \"pointer\", backgroundColor: \"#28a745\", color: \"white\", border: \"none\", fontSize: \"13px\" }}\r\n                >\r\n                  Approve\r\n                </button>\r\n                <button\r\n                  onClick={() => updateStatus(report._id, \"rejected\")}\r\n                  style={{ margin: \"5px 5px 0 0\", padding: \"5px 10px\", borderRadius: \"4px\", cursor: \"pointer\", backgroundColor: \"#dc3545\", color: \"white\", border: \"none\", fontSize: \"13px\" }}\r\n                >\r\n                  Reject\r\n                </button>\r\n                <button\r\n                  onClick={() => updateStatus(report._id, \"pending\")}\r\n                  style={{ margin: \"5px 5px 0 0\", padding: \"5px 10px\", borderRadius: \"4px\", cursor: \"pointer\", backgroundColor: \"#ffc107\", color: \"black\", border: \"none\", fontSize: \"13px\" }}\r\n                >\r\n                  Pending\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}