{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/OneDrive%20-%20Imam%20university/Desktop/Nuthur/frontend/app/forgot-password/page.js"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function ForgotPasswordPage() {\r\n  // State للبيانات\r\n  const [email, setEmail] = useState(\"\");\r\n  const [code, setCode] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [isError, setIsError] = useState(false);\r\n\r\n  // State لإدارة الخطوة الحالية (1, 2, 3)\r\n  const [currentStep, setCurrentStep] = useState(1); // 1: إدخال الإيميل, 2: إدخال الرمز, 3: إدخال الباسوورد الجديد\r\n\r\n  // 1. دالة إرسال الرمز\r\n  const handleSendCode = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/api/auth/forgot-password\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setMessage(\"✅ \" + data.message);\r\n        setIsError(false);\r\n        setCurrentStep(2); // انتقل للخطوة 2 (إدخال الرمز)\r\n      } else {\r\n        setMessage(\"❌ \" + data.error);\r\n        setIsError(true);\r\n      }\r\n    } catch (err) {\r\n      setMessage(\"❌ خطأ في الشبكة\");\r\n      setIsError(true);\r\n    }\r\n  };\r\n\r\n  // 2. دالة التحقق من الرمز\r\n  const handleVerifyCode = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/api/auth/verify-code\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email, code }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setMessage(\"✅ \" + data.message);\r\n        setIsError(false);\r\n        setCurrentStep(3); // انتقل للخطوة 3 (إدخال كلمة السر الجديدة)\r\n      } else {\r\n        setMessage(\"❌ \" + data.error);\r\n        setIsError(true);\r\n      }\r\n    } catch (err) {\r\n      setMessage(\"❌ خطأ في الشبكة\");\r\n      setIsError(true);\r\n    }\r\n  };\r\n\r\n  // 3. دالة تعيين كلمة المرور الجديدة\r\n  const handleResetPassword = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/api/auth/reset-password\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email, newPassword }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setMessage(\"✅ \" + data.message);\r\n        setIsError(false);\r\n        // يمكن توجيه المستخدم إلى صفحة الدخول هنا\r\n        // window.location.href = \"/login\";\r\n      } else {\r\n        setMessage(\"❌ \" + data.error);\r\n        setIsError(true);\r\n      }\r\n    } catch (err) {\r\n      setMessage(\"❌ خطأ في الشبكة\");\r\n      setIsError(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container py-5\">\r\n      <h1 className=\"mb-4\">Reset password</h1>\r\n\r\n      {/* الخطوة 1: إدخال الإيميل */}\r\n      {currentStep === 1 && (\r\n        <form onSubmit={handleSendCode} className=\"w-50 mx-auto\">\r\n          <p>Enter you email address</p>\r\n          <div className=\"mb-3\">\r\n            <input\r\n              type=\"email\"\r\n              className=\"form-control\"\r\n              placeholder=\"your.email@gmail.com\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"btn btn-danger w-100\">\r\n            submit\r\n          </button>\r\n        </form>\r\n      )}\r\n\r\n      {/* الخطوة 2: إدخال الرمز */}\r\n      {currentStep === 2 && (\r\n        <form onSubmit={handleVerifyCode} className=\"w-50 mx-auto\">\r\n          <p>Enter the code you recevied</p>\r\n          <div className=\"mb-3\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"******\"\r\n              value={code}\r\n              onChange={(e) => setCode(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"btn btn-danger w-100\">\r\n           Verify\r\n          </button>\r\n        </form>\r\n      )}\r\n\r\n      {/* الخطوة 3: إدخال كلمة المرور الجديدة */}\r\n      {currentStep === 3 && (\r\n        <form onSubmit={handleResetPassword} className=\"w-50 mx-auto\">\r\n          <p>Enter your new password</p>\r\n          <div className=\"mb-3\">\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              placeholder=\"your new password\"\r\n              value={newPassword}\r\n              onChange={(e) => setNewPassword(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"btn btn-danger w-100\">\r\n          Submit\r\n          </button>\r\n        </form>\r\n      )}\r\n\r\n      {/* عرض الرسائل */}\r\n      {message && (\r\n        <div className={`mt-3 text-center ${isError ? 'text-danger' : 'text-success'}`}>\r\n          {message}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}