{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/OneDrive%20-%20Imam%20university/Desktop/Nuthur/frontend/app/log-in/page.js"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function LogInPage() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n  setError(\"\");\r\n\r\n  try {\r\n    const res = await fetch(\"http://localhost:5000/api/auth/login\", {\r\n  method: \"POST\",\r\n  headers: { \"Content-Type\": \"application/json\" },\r\n  body: JSON.stringify({ email, password }),\r\n});\r\n\r\n    const data = await res.json();\r\nif (res.ok) {\r\n  // نحاول نجيب الدور سواء من data.user.role أو data.role\r\n  const role = data.user?.role || data.role;\r\n\r\n  localStorage.setItem(\"authToken\", data.token);\r\n  localStorage.setItem(\"userRole\", role);\r\n\r\n  console.log(\"Login success:\", data, \"Role:\", role);\r\n\r\n  // التوجيه حسب الدور\r\n if (role === \"employee\") {\r\n  window.location.href = \"/employeeDashboard\";\r\n} else {\r\n window.location.href = \"/Volunteer/volunteerDashboard\"; // إذا هذه صفحة Next\r\n}\r\n\r\n} else {\r\n  setError(data.error || \"Invalid credentials\");\r\n}\r\n\r\n  } catch (err) {\r\n    console.error(\"Full error details:\", err);\r\n    setError(\"Server error, try again later.\");\r\n  }\r\n};\r\n\r\n  return (\r\n    <div className=\"container py-5\">\r\n      <h1 className=\"mb-4\">Log In</h1>\r\n      <form className=\"w-50 mx-auto\" onSubmit={handleSubmit}>\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Email</label>\r\n          <input\r\n            type=\"email\" \r\n            className=\"form-control\"\r\n            placeholder=\"Enter your email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            placeholder=\"Enter password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-danger w-100 mb-3\" >\r\n          Log In\r\n        </button>\r\n        {error && <p className=\"text-danger text-center\">{error}</p>}\r\n        <div className=\"text-center\">\r\n          <Link href=\"/forgot-password\" className=\"text-danger\">\r\n            Forgot Password?\r\n          </Link>\r\n          \r\n          \r\n        \r\n        </div>\r\n        \r\n      </form>\r\n    </div>\r\n    \r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,MAAM,eAAe,OAAO;QAC5B,EAAE,cAAc;QAChB,SAAS;QAET,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,wCAAwC;gBAClE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAO;gBAAS;YACzC;YAEI,MAAM,OAAO,MAAM,IAAI,IAAI;YAC/B,IAAI,IAAI,EAAE,EAAE;gBACV,uDAAuD;gBACvD,MAAM,OAAO,KAAK,IAAI,EAAE,QAAQ,KAAK,IAAI;gBAEzC,aAAa,OAAO,CAAC,aAAa,KAAK,KAAK;gBAC5C,aAAa,OAAO,CAAC,YAAY;gBAEjC,QAAQ,GAAG,CAAC,kBAAkB,MAAM,SAAS;gBAE7C,oBAAoB;gBACrB,IAAI,SAAS,YAAY;oBACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACzB,OAAO;oBACN,OAAO,QAAQ,CAAC,IAAI,GAAG,iCAAiC,oBAAoB;gBAC7E;YAEA,OAAO;gBACL,SAAS,KAAK,KAAK,IAAI;YACzB;QAEE,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,uBAAuB;YACrC,SAAS;QACX;IACF;IAEE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAO;;;;;;0BACrB,8OAAC;gBAAK,WAAU;gBAAe,UAAU;;kCACvC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAM,WAAU;0CAAa;;;;;;0CAC9B,8OAAC;gCACC,MAAK;gCACL,WAAU;gCACV,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gCACxC,QAAQ;;;;;;;;;;;;kCAGZ,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAM,WAAU;0CAAa;;;;;;0CAC9B,8OAAC;gCACC,MAAK;gCACL,WAAU;gCACV,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gCAC3C,QAAQ;;;;;;;;;;;;kCAGZ,8OAAC;wBAAO,MAAK;wBAAS,WAAU;kCAA6B;;;;;;oBAG5D,uBAAS,8OAAC;wBAAE,WAAU;kCAA2B;;;;;;kCAClD,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,uKAAI;4BAAC,MAAK;4BAAmB,WAAU;sCAAc;;;;;;;;;;;;;;;;;;;;;;;AAYhE","debugId":null}}]
}