{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/OneDrive%20-%20Imam%20university/Desktop/Nuthur/frontend/app/employee/reports/page.js"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function EmployeeReports() {\r\n  const [allReports, setAllReports] = useState([]);\r\n  const [searchName, setSearchName] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState(\"All\");\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Fetch reports from backend\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"authToken\");\r\n\r\n    fetch(\"http://localhost:5000/api/reports\", {\r\n      headers: {\r\n        \"Authorization\": `Bearer ${token}`\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setAllReports(data);\r\n        setLoading(false);\r\n      })\r\n      .catch(err => {\r\n        console.error(\"Error fetching reports:\", err);\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  // Update report status\r\n  const updateStatus = (id, status) => {\r\n    const token = localStorage.getItem(\"authToken\");\r\n\r\n    fetch(`http://localhost:5000/api/reports/update/${id}`, {\r\n      method: \"PUT\",\r\n      headers: { \r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": `Bearer ${token}`\r\n      },\r\n      body: JSON.stringify({ status })\r\n    })\r\n      .then(res => res.json())\r\n      .then(updatedReport => {\r\n        setAllReports(prev => prev.map(r => r._id === updatedReport._id ? updatedReport : r));\r\n      })\r\n      .catch(err => console.error(\"Error updating status:\", err));\r\n  };\r\n\r\n  // Apply filters\r\n  const filteredReports = allReports.filter(r =>\r\n    r.user?.name?.toLowerCase().includes(searchName.toLowerCase()) &&\r\n    (statusFilter === \"All\" || r.status === statusFilter)\r\n  );\r\n\r\n  if (loading) return <p>Loading...</p>;\r\n\r\n  return (\r\n    <div style={{ fontFamily: \"Arial, sans-serif\", backgroundColor: \"#f4f4f9\", padding: \"20px\", minHeight: \"100vh\" }}>\r\n      <h1 style={{ textAlign: \"center\", color: \"#333\" }}>Employee - Volunteer Reports Dashboard</h1>\r\n\r\n      {/* Filters */}\r\n      <div style={{ textAlign: \"center\", marginBottom: \"20px\" }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search by volunteer name...\"\r\n          value={searchName}\r\n          onChange={(e) => setSearchName(e.target.value)}\r\n          style={{ padding: \"5px 10px\", margin: \"0 5px\", fontSize: \"14px\" }}\r\n        />\r\n        <select\r\n          value={statusFilter}\r\n          onChange={(e) => setStatusFilter(e.target.value)}\r\n          style={{ padding: \"5px 10px\", margin: \"0 5px\", fontSize: \"14px\" }}\r\n        >\r\n          <option value=\"All\">All Statuses</option>\r\n          <option value=\"resolved\">resolved</option>\r\n          <option value=\"rejected\">Rejected</option>\r\n          <option value=\"pending\">Pending</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Reports */}\r\n      <div style={{ display: \"flex\", flexWrap: \"wrap\", justifyContent: \"center\" }}>\r\n        {filteredReports.length === 0 ? (\r\n          <p>No reports found</p>\r\n        ) : (\r\n          filteredReports.map(report => (\r\n            <div\r\n              key={report._id}\r\n              style={{\r\n                border: \"1px solid #ccc\",\r\n                borderRadius: \"8px\",\r\n                padding: \"15px\",\r\n                margin: \"10px\",\r\n                width: \"300px\",\r\n                boxShadow: \"0 2px 5px rgba(0,0,0,0.1)\",\r\n                backgroundColor:\r\n                  report.status === \"resolved\" ? \"#d4edda\" :\r\n                  report.status === \"rejected\" ? \"#f8d7da\" :\r\n                  \"#fff3cd\",\r\n                transition: \"transform 0.2s\"\r\n              }}\r\n              onMouseEnter={e => e.currentTarget.style.transform = \"translateY(-5px)\"}\r\n              onMouseLeave={e => e.currentTarget.style.transform = \"translateY(0)\"}\r\n            >\r\n              <h3 style={{ margin: \"0 0 10px 0\", fontSize: \"18px\", color: \"#555\" }}>\r\n                {report.user?.name} ({report.user?.email})\r\n              </h3>\r\n              <p style={{ margin: \"5px 0\", fontSize: \"14px\", color: \"#666\" }}>Description: {report.description}</p>\r\n              <p style={{ margin: \"5px 0\", fontSize: \"14px\", color: \"#666\" }}>\r\n                Status: <span style={{ fontWeight: \"bold\" }}>{report.status}</span>\r\n              </p>\r\n\r\n              {/* صورة البلاغ */}\r\n              {report.image && (\r\n                <img\r\n                  src={`http://localhost:5000/api/reports/image/${report.image}`} \r\n                  alt=\"report\"\r\n                  width=\"100%\"\r\n                  style={{ borderRadius: \"5px\", marginTop: \"10px\" }}\r\n                />\r\n              )}\r\n\r\n              {/* أزرار التحكم */}\r\n              <div style={{ marginTop: \"10px\" }}>\r\n                <button\r\n                  onClick={() => updateStatus(report._id, \"resolved\")}\r\n                  style={{ margin: \"5px 5px 0 0\", padding: \"5px 10px\", borderRadius: \"4px\", cursor: \"pointer\", backgroundColor: \"#28a745\", color: \"white\", border: \"none\", fontSize: \"13px\" }}\r\n                >\r\n                  Approve\r\n                </button>\r\n                <button\r\n                  onClick={() => updateStatus(report._id, \"rejected\")}\r\n                  style={{ margin: \"5px 5px 0 0\", padding: \"5px 10px\", borderRadius: \"4px\", cursor: \"pointer\", backgroundColor: \"#dc3545\", color: \"white\", border: \"none\", fontSize: \"13px\" }}\r\n                >\r\n                  Reject\r\n                </button>\r\n                <button\r\n                  onClick={() => updateStatus(report._id, \"pending\")}\r\n                  style={{ margin: \"5px 5px 0 0\", padding: \"5px 10px\", borderRadius: \"4px\", cursor: \"pointer\", backgroundColor: \"#ffc107\", color: \"black\", border: \"none\", fontSize: \"13px\" }}\r\n                >\r\n                  Pending\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}